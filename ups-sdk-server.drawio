<mxfile host="app.diagrams.net" modified="2024-06-04T11:56:08.642Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36" etag="IIsGOZXXgyYrSjj-ZJBL" version="24.1.0" type="github">
  <diagram name="第 1 页" id="P3PRF9sL8A8i7NnSt31k">
    <mxGraphModel dx="2234" dy="1291" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="kFdlLgyc5DfltvUgqAMj-2" value="ModuleSDKRegister" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-232" y="34" width="302" height="104" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-3" value="- m_pSession : SessionBizConsistency" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-2">
          <mxGeometry y="26" width="302" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-4" value="+ Init(): bool" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-2">
          <mxGeometry y="52" width="302" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-5" value="+ AnyMessage(): bool" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-2">
          <mxGeometry y="78" width="302" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-12" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-8" target="kFdlLgyc5DfltvUgqAMj-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-35" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-6" target="kFdlLgyc5DfltvUgqAMj-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-6" value="SessionBizConsistency" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-231" y="-141" width="300" height="101" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-13" value="CmdOnBizIdConsistent" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="275" y="-145" width="517" height="104" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-14" value="+ AnyMessage(): 通知worker线程" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-13">
          <mxGeometry y="26" width="517" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-15" value="- m_pSession: SessionBizConsistency worker线程持有的对象，获取路由信息" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-13">
          <mxGeometry y="52" width="517" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-16" value="+ field: type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-13">
          <mxGeometry y="78" width="517" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-23" value="StepBizIdConsistent" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="281" y="23" width="361" height="113" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-24" value="+ Emit(): 通知其他节点或seed节点收到的注册信息" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-23">
          <mxGeometry y="26" width="361" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-25" value="+ Callback(): 整合收到的其他节点信息和本地信息，计算sign 回写到Session" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-23">
          <mxGeometry y="52" width="361" height="35" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-26" value="+ m_pSession: SessionBizConsistency" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-23">
          <mxGeometry y="87" width="361" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-27" value="CmdBizIdConsistent" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="264" y="201" width="410" height="104" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-28" value="+ AnyMessage(): 请求其他节点，发送本地收到的注册信息" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-27">
          <mxGeometry y="26" width="410" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-29" value="+ Init:" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-27">
          <mxGeometry y="52" width="410" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-30" value="- m_pSession: SessionBizConsistency" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-27">
          <mxGeometry y="78" width="410" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-31" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-8" target="kFdlLgyc5DfltvUgqAMj-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-32" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-15" target="kFdlLgyc5DfltvUgqAMj-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-8" value="- m_mapRouteInfo&lt;div&gt;- m_strRouteInfo: JSON style for other nodes&lt;/div&gt;&lt;div&gt;- m_strSign: route_info sign&lt;/div&gt;&lt;div&gt;+ Timeout() : 定时与其他节点通信交换route-info&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-231" y="-115" width="300" height="75" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-39" value="" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-36" target="kFdlLgyc5DfltvUgqAMj-40">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-345" y="505" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-41" value="Regist" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;" vertex="1" connectable="0" parent="kFdlLgyc5DfltvUgqAMj-39">
          <mxGeometry x="-0.1595" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-36" value="SDK" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" vertex="1" parent="1">
          <mxGeometry x="-450" y="475" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-40" value="Manager" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="-332" y="425" width="100" height="300" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-42" value="SessionBizConsistency" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="-192" y="425" width="166" height="478" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-59" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-42">
          <mxGeometry x="80" y="423" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-60" value="定时请求其他节点" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;fontSize=12;startSize=8;endSize=8;" edge="1" target="kFdlLgyc5DfltvUgqAMj-59" parent="kFdlLgyc5DfltvUgqAMj-42" source="kFdlLgyc5DfltvUgqAMj-42">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="85" y="261" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="176" y="417" />
              <mxPoint x="176" y="443" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-45" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;fontSize=12;entryX=1;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-40" target="kFdlLgyc5DfltvUgqAMj-36">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-305" y="592" as="sourcePoint" />
            <mxPoint x="-385" y="592" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-46" value="收到的注册信息写入session" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-40" target="kFdlLgyc5DfltvUgqAMj-42">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="-203" y="523" as="sourcePoint" />
            <mxPoint x="-123" y="523" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-47" value="StepBizIdConsistent" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="-108" y="597" as="sourcePoint" />
            <mxPoint x="94" y="597" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-48" value="Manager（other-node）" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="41" y="424" width="100" height="300" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-49" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;fontSize=12;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="91" y="651" as="sourcePoint" />
            <mxPoint x="-109" y="651" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-50" value="CmdBizIdConsistent （other-node）" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="226" y="420" width="143" height="302" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-51" value="dispatch" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" target="kFdlLgyc5DfltvUgqAMj-50">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="93" y="607" as="sourcePoint" />
            <mxPoint x="173" y="607" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-52" value="整合本节点信息返回所有route-info" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;fontSize=12;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-50">
          <mxGeometry x="-0.0029" relative="1" as="geometry">
            <mxPoint x="260.5" y="633" as="sourcePoint" />
            <mxPoint x="88" y="633" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-55" value="SessionBizConsistency（other-node）" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="428" y="420" width="166" height="299" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-56" value="更新本地Session" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="298" y="619" as="sourcePoint" />
            <mxPoint x="511.5" y="619" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-57" value="Worker" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="1">
          <mxGeometry x="-332" y="731" width="100" height="300" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-58" value="通知worker" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" target="kFdlLgyc5DfltvUgqAMj-57">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="-110" y="834" as="sourcePoint" />
            <mxPoint x="-30" y="834" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-66" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-61" target="kFdlLgyc5DfltvUgqAMj-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-69" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-61" target="kFdlLgyc5DfltvUgqAMj-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-70" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-61" target="kFdlLgyc5DfltvUgqAMj-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-61" value="node1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-327" y="1246" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-67" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-62" target="kFdlLgyc5DfltvUgqAMj-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-75" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-62" target="kFdlLgyc5DfltvUgqAMj-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-77" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-62" target="kFdlLgyc5DfltvUgqAMj-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-79" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-62" target="kFdlLgyc5DfltvUgqAMj-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-62" value="node2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-157" y="1246" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-68" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-63" target="kFdlLgyc5DfltvUgqAMj-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-72" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-63" target="kFdlLgyc5DfltvUgqAMj-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-74" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-63" target="kFdlLgyc5DfltvUgqAMj-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-63" target="kFdlLgyc5DfltvUgqAMj-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-63" value="node3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="-329" y="1417" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-71" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-64" target="kFdlLgyc5DfltvUgqAMj-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-73" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-64" target="kFdlLgyc5DfltvUgqAMj-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-76" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-64" target="kFdlLgyc5DfltvUgqAMj-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-81" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-64" target="kFdlLgyc5DfltvUgqAMj-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-64" value="node4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="-155" y="1417" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-78" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-65" target="kFdlLgyc5DfltvUgqAMj-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-65" target="kFdlLgyc5DfltvUgqAMj-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-65" value="node5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="70" y="1334" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-80" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-65" target="kFdlLgyc5DfltvUgqAMj-64">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-76" y="1461" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-84" value="Seed" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="-317" y="1204" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-85" value="Seed" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="-147" y="1204" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-86" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;说明&lt;/h1&gt;&lt;div&gt;1. 节点收到注册信息时优先通知seed节点，将本节点所有信息整合计算sign发送给seed。&lt;/div&gt;&lt;div&gt;2. seed 收到请求整合所有信息计算新sign，同时返回所有其他节点和他们的sign。&lt;/div&gt;&lt;div&gt;3. 节点判断sign，并更新本地信息，同时将新信息和新sign发送给其他节点。&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-329" y="1530" width="495" height="135" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-87" value="ModuleUpsService" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-334" y="1798" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-88" value="ModuleUpsService" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-334" y="1906" width="337" height="106" as="geometry">
            <mxRectangle x="-334" y="1906" width="136" height="26" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-89" value="- m_pSession: SessionUpsGrpcService" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-88">
          <mxGeometry y="26" width="337" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-90" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-88">
          <mxGeometry y="52" width="337" height="8" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-91" value="+ Init():&amp;nbsp; // 初始化session&lt;div&gt;+ AnyMessage(): // 处理请求，交给Session处理&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-88">
          <mxGeometry y="60" width="337" height="46" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-92" value="SessionUpsGrpcService" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="169" y="1908" width="407" height="171" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-93" value="- m_pSessionProxy: SessionProxy // 处理redis cmd&lt;div&gt;- m_mapRouteInfo: // 承接mananger发过来的注册信息，用于判断拆分请求。&lt;/div&gt;&lt;div&gt;- m_bBizIdOn: // 能否使用bizId替代fields&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-92">
          <mxGeometry y="26" width="407" height="70" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-94" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-92">
          <mxGeometry y="96" width="407" height="8" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-95" value="+ OnRegist():&amp;nbsp; // 更新worker 注册信息&lt;div&gt;+ HmgetBusinessId(): // 处理business_id路由&lt;/div&gt;&lt;div&gt;+ MhmgetBusinessId(): // 处理mhmget business_id路由。&lt;/div&gt;&lt;div&gt;+ SendBusinessIdReq(): // 通过UPSGrpcContextData 发送拆分后的请求。&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-92">
          <mxGeometry y="104" width="407" height="67" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-96" value="UpsGrpcContextData" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-334" y="2120" width="282" height="104" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-97" value="+ AddReq()&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-96">
          <mxGeometry y="26" width="282" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-98" value="+ Done(): // 给客户端channel写入响应" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-96">
          <mxGeometry y="52" width="282" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-99" value="+ AddResp()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-96">
          <mxGeometry y="78" width="282" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-100" value="StepUpsGrpc" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="48" y="2146" width="524" height="104" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-101" value="+ context : // 继承自Actor，SessionUPSGrpcService需要先设置context再创建这个Step" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-100">
          <mxGeometry y="26" width="524" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-102" value="+ field: type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-100">
          <mxGeometry y="52" width="524" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-103" value="+ field: type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="kFdlLgyc5DfltvUgqAMj-100">
          <mxGeometry y="78" width="524" height="26" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-104" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-91" target="kFdlLgyc5DfltvUgqAMj-93">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-105" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-95" target="kFdlLgyc5DfltvUgqAMj-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1.004;entryY=0.192;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-95" target="kFdlLgyc5DfltvUgqAMj-102">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="596" y="2046" />
              <mxPoint x="596" y="2204" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="kFdlLgyc5DfltvUgqAMj-107" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startSize=8;endSize=8;" edge="1" parent="1" source="kFdlLgyc5DfltvUgqAMj-101" target="kFdlLgyc5DfltvUgqAMj-98">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
